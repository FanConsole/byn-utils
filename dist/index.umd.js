(function(m,O){typeof exports=="object"&&typeof module!="undefined"?O(exports):typeof define=="function"&&define.amd?define(["exports"],O):(m=typeof globalThis!="undefined"?globalThis:m||self,O(m.BynUtils={}))})(this,function(m){"use strict";const O=(t,o=2,i)=>{const f=Number(t);if(isNaN(f))return 0;const{floor:r}=i||{},n=Math.pow(10,o+1),a=Math.pow(10,o);return(r?Math.floor(f*n/10):Math.round(f*n/10))/a},B=(t,o=2)=>O(t,o),D=typeof window=="undefined";function G(t,o,i){if(!t||D)return;const{expired:f,runTime:r}={...i},n=JSON.stringify({t:Date.now(),expired:f,data:o});r?sessionStorage.setItem(t,n):localStorage.setItem(t,n)}function J(t,o){if(!t||D)return null;const{runTime:i,expired:f}={...o};let r=i?sessionStorage.getItem(t):localStorage.getItem(t);if(!r)return r;r=JSON.parse(r);const n=f||r.expired;return n&&Date.now()-r.t>n?null:r.data}function q(t,o){if(D)return;const{runTime:i}={...o};i?sessionStorage.removeItem(t):localStorage.removeItem(t)}function V(t){if(D)return;const{runTime:o}={...t};o?sessionStorage.clear():localStorage.clear()}function X(){if(typeof window=="undefined")return{};const t=navigator.userAgent,o=/macintosh|mac os x/i.test(t);return{devicePixelRatio:window.devicePixelRatio,language:navigator.language,windowHeight:window.innerHeight,windowWidth:window.innerWidth,isMac:o,isIos:/(iPhone|iPad|iPod|iOS)/i.test(t)||o,isWeixin:/micromessenger/.test(t.toLowerCase()),isAlipay:/alipay/.test(t.toLowerCase())}}function Z(t){location.href="tel:"+t}function K(t,o=!1){const i=t.replace(/-(\w)/g,(f,r)=>r.toUpperCase());return o?`${i[0].toUpperCase()}${i.substring(1)}`:i}function Q(t){return t.replace(/[A-Z]/g,o=>"-"+o.toLowerCase())}function tt(t,o=150){let i=0;return function(...f){const r=Date.now();r-i>o&&(t.apply(this,f),i=r)}}function et(t,o=200,i=!1){let f;return function(...r){if(f&&clearTimeout(f),i)return f=null,t.apply(this,r);f=setTimeout(()=>t.apply(this,r),o)}}function nt(t,o=1){if(!t)return;let i=t.toLowerCase();if(/^#([0-9a-f]{3}|[0-9a-f]{6})$/.test(i)){if(i.length===4){let n="#";for(let a=1;a<4;a+=1)n+=i[a]+i[a];i=n}const r=[];for(let n=1;n<7;n+=2)r.push(parseInt("0x"+i.substring(n,n+2),16));return`rgba(${r.join(",")},${o})`}if(i.startsWith("rgba")){const r=i.split(",");return r[3]=`${o})`,r.join(",")}return i.startsWith("rgb")?(i.substring(0,i.length-1)+`,${o})`).replace("rgb","rgba"):i}function rt(t){return t.length>19&&(t=t.substring(0,19).replace("T"," ")),new Date(t.replace(/-/g,"/"))}function C(t,o=2,i){const{right:f,sign:r="0"}=i||{},n=String(t);let a="";const e=o-n.length;if(e>0)for(let c=0;c<e;c++)a+=r;return f?`${n}${a}`:`${a}${n}`}function ot(t,o){const{format:i="YYYY-MM-DD HH:mm:ss"}=o||{},f=t.getFullYear(),r=C(t.getMonth()+1,2),n=C(t.getDate(),2),a=C(t.getHours(),2),e=C(t.getMinutes(),2),c=C(t.getSeconds(),2);return i.replace("YYYY",`${f}`).replace("MM",r).replace("DD",n).replace("HH",a).replace("mm",e).replace("ss",c)}const it=t=>Number(t).toLocaleString(),at=(t,o=!0)=>{t=t||0;let a="00",e="00";o?(a=C(Math.floor(t/864e5)),e=C(Math.floor(t%864e5/36e5))):e=C(Math.floor(t/36e5));const c=C(Math.floor(t%36e5/6e4)),d=C(Math.floor(t%6e4/1e3)),y=Math.floor(Math.floor(t%1e3)/100);return{days:a,hours:e,minutes:c,seconds:d,milliseconds:y}};function H(t){return t instanceof Promise||typeof(t==null?void 0:t.then)=="function"}function ct(t){return/^1[3-9]{1}\d{9}$/.test(t)}const Y=typeof window!="undefined";var ut=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function st(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var $={exports:{}};/*!
 * clipboard.js v2.0.11
 * https://clipboardjs.com/
 *
 * Licensed MIT Â© Zeno Rocha
 */(function(t,o){(function(f,r){t.exports=r()})(ut,function(){return function(){var i={686:function(n,a,e){e.d(a,{default:function(){return jt}});var c=e(279),d=e.n(c),y=e(370),S=e.n(y),w=e(817),T=e.n(w);function b(g){try{return document.execCommand(g)}catch{return!1}}var E=function(s){var u=T()(s);return b("cut"),u},v=E;function A(g){var s=document.documentElement.getAttribute("dir")==="rtl",u=document.createElement("textarea");u.style.fontSize="12pt",u.style.border="0",u.style.padding="0",u.style.margin="0",u.style.position="absolute",u.style[s?"right":"left"]="-9999px";var l=window.pageYOffset||document.documentElement.scrollTop;return u.style.top="".concat(l,"px"),u.setAttribute("readonly",""),u.value=g,u}var W=function(s,u){var l=A(s);u.container.appendChild(l);var p=T()(l);return b("copy"),l.remove(),p},Mt=function(s){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body},l="";return typeof s=="string"?l=W(s,u):s instanceof HTMLInputElement&&!["text","search","url","tel","password"].includes(s==null?void 0:s.type)?l=W(s.value,u):(l=T()(s),b("copy")),l},U=Mt;function L(g){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?L=function(u){return typeof u}:L=function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},L(g)}var Ot=function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=s.action,l=u===void 0?"copy":u,p=s.container,h=s.target,_=s.text;if(l!=="copy"&&l!=="cut")throw new Error('Invalid "action" value, use either "copy" or "cut"');if(h!==void 0)if(h&&L(h)==="object"&&h.nodeType===1){if(l==="copy"&&h.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if(l==="cut"&&(h.hasAttribute("readonly")||h.hasAttribute("disabled")))throw new Error(`Invalid "target" attribute. You can't cut text from elements with "readonly" or "disabled" attributes`)}else throw new Error('Invalid "target" value, use a valid Element');if(_)return U(_,{container:p});if(h)return l==="cut"?v(h):U(h,{container:p})},xt=Ot;function N(g){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?N=function(u){return typeof u}:N=function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},N(g)}function Nt(g,s){if(!(g instanceof s))throw new TypeError("Cannot call a class as a function")}function z(g,s){for(var u=0;u<s.length;u++){var l=s[u];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(g,l.key,l)}}function Dt(g,s,u){return s&&z(g.prototype,s),u&&z(g,u),g}function Lt(g,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");g.prototype=Object.create(s&&s.prototype,{constructor:{value:g,writable:!0,configurable:!0}}),s&&j(g,s)}function j(g,s){return j=Object.setPrototypeOf||function(l,p){return l.__proto__=p,l},j(g,s)}function Pt(g){var s=It();return function(){var l=P(g),p;if(s){var h=P(this).constructor;p=Reflect.construct(l,arguments,h)}else p=l.apply(this,arguments);return kt(this,p)}}function kt(g,s){return s&&(N(s)==="object"||typeof s=="function")?s:Rt(g)}function Rt(g){if(g===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}function It(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function P(g){return P=Object.setPrototypeOf?Object.getPrototypeOf:function(u){return u.__proto__||Object.getPrototypeOf(u)},P(g)}function F(g,s){var u="data-clipboard-".concat(g);if(!!s.hasAttribute(u))return s.getAttribute(u)}var Ut=function(g){Lt(u,g);var s=Pt(u);function u(l,p){var h;return Nt(this,u),h=s.call(this),h.resolveOptions(p),h.listenClick(l),h}return Dt(u,[{key:"resolveOptions",value:function(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.action=typeof p.action=="function"?p.action:this.defaultAction,this.target=typeof p.target=="function"?p.target:this.defaultTarget,this.text=typeof p.text=="function"?p.text:this.defaultText,this.container=N(p.container)==="object"?p.container:document.body}},{key:"listenClick",value:function(p){var h=this;this.listener=S()(p,"click",function(_){return h.onClick(_)})}},{key:"onClick",value:function(p){var h=p.delegateTarget||p.currentTarget,_=this.action(h)||"copy",k=xt({action:_,container:this.container,target:this.target(h),text:this.text(h)});this.emit(k?"success":"error",{action:_,text:k,trigger:h,clearSelection:function(){h&&h.focus(),window.getSelection().removeAllRanges()}})}},{key:"defaultAction",value:function(p){return F("action",p)}},{key:"defaultTarget",value:function(p){var h=F("target",p);if(h)return document.querySelector(h)}},{key:"defaultText",value:function(p){return F("text",p)}},{key:"destroy",value:function(){this.listener.destroy()}}],[{key:"copy",value:function(p){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body};return U(p,h)}},{key:"cut",value:function(p){return v(p)}},{key:"isSupported",value:function(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["copy","cut"],h=typeof p=="string"?[p]:p,_=!!document.queryCommandSupported;return h.forEach(function(k){_=_&&!!document.queryCommandSupported(k)}),_}}]),u}(d()),jt=Ut},828:function(n){var a=9;if(typeof Element!="undefined"&&!Element.prototype.matches){var e=Element.prototype;e.matches=e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector}function c(d,y){for(;d&&d.nodeType!==a;){if(typeof d.matches=="function"&&d.matches(y))return d;d=d.parentNode}}n.exports=c},438:function(n,a,e){var c=e(828);function d(w,T,b,E,v){var A=S.apply(this,arguments);return w.addEventListener(b,A,v),{destroy:function(){w.removeEventListener(b,A,v)}}}function y(w,T,b,E,v){return typeof w.addEventListener=="function"?d.apply(null,arguments):typeof b=="function"?d.bind(null,document).apply(null,arguments):(typeof w=="string"&&(w=document.querySelectorAll(w)),Array.prototype.map.call(w,function(A){return d(A,T,b,E,v)}))}function S(w,T,b,E){return function(v){v.delegateTarget=c(v.target,T),v.delegateTarget&&E.call(w,v)}}n.exports=y},879:function(n,a){a.node=function(e){return e!==void 0&&e instanceof HTMLElement&&e.nodeType===1},a.nodeList=function(e){var c=Object.prototype.toString.call(e);return e!==void 0&&(c==="[object NodeList]"||c==="[object HTMLCollection]")&&"length"in e&&(e.length===0||a.node(e[0]))},a.string=function(e){return typeof e=="string"||e instanceof String},a.fn=function(e){var c=Object.prototype.toString.call(e);return c==="[object Function]"}},370:function(n,a,e){var c=e(879),d=e(438);function y(b,E,v){if(!b&&!E&&!v)throw new Error("Missing required arguments");if(!c.string(E))throw new TypeError("Second argument must be a String");if(!c.fn(v))throw new TypeError("Third argument must be a Function");if(c.node(b))return S(b,E,v);if(c.nodeList(b))return w(b,E,v);if(c.string(b))return T(b,E,v);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function S(b,E,v){return b.addEventListener(E,v),{destroy:function(){b.removeEventListener(E,v)}}}function w(b,E,v){return Array.prototype.forEach.call(b,function(A){A.addEventListener(E,v)}),{destroy:function(){Array.prototype.forEach.call(b,function(A){A.removeEventListener(E,v)})}}}function T(b,E,v){return d(document.body,b,E,v)}n.exports=y},817:function(n){function a(e){var c;if(e.nodeName==="SELECT")e.focus(),c=e.value;else if(e.nodeName==="INPUT"||e.nodeName==="TEXTAREA"){var d=e.hasAttribute("readonly");d||e.setAttribute("readonly",""),e.select(),e.setSelectionRange(0,e.value.length),d||e.removeAttribute("readonly"),c=e.value}else{e.hasAttribute("contenteditable")&&e.focus();var y=window.getSelection(),S=document.createRange();S.selectNodeContents(e),y.removeAllRanges(),y.addRange(S),c=y.toString()}return c}n.exports=a},279:function(n){function a(){}a.prototype={on:function(e,c,d){var y=this.e||(this.e={});return(y[e]||(y[e]=[])).push({fn:c,ctx:d}),this},once:function(e,c,d){var y=this;function S(){y.off(e,S),c.apply(d,arguments)}return S._=c,this.on(e,S,d)},emit:function(e){var c=[].slice.call(arguments,1),d=((this.e||(this.e={}))[e]||[]).slice(),y=0,S=d.length;for(y;y<S;y++)d[y].fn.apply(d[y].ctx,c);return this},off:function(e,c){var d=this.e||(this.e={}),y=d[e],S=[];if(y&&c)for(var w=0,T=y.length;w<T;w++)y[w].fn!==c&&y[w].fn._!==c&&S.push(y[w]);return S.length?d[e]=S:delete d[e],this}},n.exports=a,n.exports.TinyEmitter=a}},f={};function r(n){if(f[n])return f[n].exports;var a=f[n]={exports:{}};return i[n](a,a.exports,r),a.exports}return function(){r.n=function(n){var a=n&&n.__esModule?function(){return n.default}:function(){return n};return r.d(a,{a}),a}}(),function(){r.d=function(n,a){for(var e in a)r.o(a,e)&&!r.o(n,e)&&Object.defineProperty(n,e,{enumerable:!0,get:a[e]})}}(),function(){r.o=function(n,a){return Object.prototype.hasOwnProperty.call(n,a)}}(),r(686)}().default})})($);var ft=st($.exports),lt=t=>{const o=(t==null?void 0:t.appendToBody)===void 0?!0:t.appendToBody;return{toClipboard(i,f){return new Promise((r,n)=>{const a=document.createElement("button"),e=new ft(a,{text:()=>i,action:()=>"copy",container:f!==void 0?f:document.body});e.on("success",c=>{e.destroy(),r(c)}),e.on("error",c=>{e.destroy(),n(c)}),o&&document.body.appendChild(a),a.click(),o&&document.body.removeChild(a)})}}};const{toClipboard:dt}=lt(),pt=t=>new Promise(async(o,i)=>{try{await dt(t),o()}catch(f){i(f)}}),gt="wxJsSdk",yt="//res.wx.qq.com/open/js/jweixin-1.6.0.js",ht=(t,o)=>new Promise((i,f)=>{const r=document.createElement("script");if(o)for(let n in o)r.setAttribute(n,o[n]);r.src=t,r.onload=i,r.onerror=n=>{document.head.removeChild(r),f(n)},document.head.appendChild(r)}),x={configData:null};(()=>{if(!Y)return;const t=navigator.userAgent,o=/macintosh|mac os x/i.test(t);Object.assign(x,{isIos:/(iPhone|iPad|iPod|iOS)/i.test(t)||o,isWeixin:/micromessenger/.test(t.toLowerCase()),launchedUrl:location.href})})();const R=new Map,M=new Map,mt=(t,o)=>{const i=M.get(t)||[];i.push(o),M.set(t,i)},bt=(t,o)=>{if(o&&M.has(t)){const i=M.get(t);if(!i)return;const f=i.findIndex(r=>r===o);f!==-1&&i.splice(f,1),M.set(t,i)}else M.delete(t)},vt=t=>{const o=M.get(t);!o||(o.forEach(i=>i()),M.delete(t))},wt=t=>{const{isIos:o,isWeixin:i}=x;let f=(t==null?void 0:t.sdkLoadedUrl)||location.href;const r=(e,c)=>{const d=(c==null?void 0:c.url)||location.href;R.get(d)?e():mt(d,e)},n=(e,c)=>{bt((c==null?void 0:c.url)||location.href,e)},a=async()=>{if(!i)throw new Error("\u975E\u5FAE\u4FE1\u73AF\u5883\uFF0C\u65E0\u9700\u914D\u7F6E");if(!(t!=null&&t.dataGetter))throw new Error("\u53C2\u6570\u7F3A\u5931\uFF1AdataGetter");const e=location.href;window.wx||await ht(yt,{id:gt}),R.set(e,!1);const c=t.dataGetter({url:e,sdkLoadedUrl:o&&!x.configData?f:!1}),{config:d,shareData:y}=H(c)?await c:c;return!x.configData&&(window.wx.config(d),o&&(x.configData=d,e!==f))?a():new Promise((S,w)=>{window.wx.ready(()=>{y&&(window.wx.updateTimelineShareData(y),window.wx.updateAppMessageShareData(y)),S({ready:!0}),R.set(e,!0),vt(e)}),window.wx.error(T=>{w(new Error(T.errMsg))})})};return{configWxSdk:a,onConfigReady:r,removeReadyCallback:n}};let I;const St=t=>(I||(I=wt(t)),I),Et=["png","jpg","jpeg"],Tt=(t,o=.7)=>new Promise(i=>{let f=t;Ct(t,r=>{Et.includes(r.fileType.split("/")[1])||i({file:t});const n=_t(r,o);n.size<f.size&&(f=n),i({file:f})})}),Ct=async(t,o)=>{const f=(window.URL||window.webkitURL).createObjectURL(new Blob([t])),r=new Image;let n,a;r.src=f,r.onload=()=>{n=r.width,a=r.height,o({w:n,h:a,fileName:t.name,fileSize:t.size,fileType:t.type,img:r})}},_t=(t,o)=>{let{fileName:i,w:f,h:r,img:n,fileType:a}=t;const e=document.createElement("canvas"),c=e.getContext("2d");e.width=f,e.height=r,c&&c.drawImage(n,0,0,f,r);const d=e.toDataURL(a,o);return At(d,i)},At=(t,o)=>{const i=t.split(","),f=i[0].match(/:(.*?);/)[1],r=atob(i[1]);let n=r.length,a=new Uint8Array(n);for(;n--;)a[n]=r.charCodeAt(n);return new File([a],o,{type:f})};m.camelize=K,m.clearStorage=V,m.colorRgba=nt,m.compressImage=Tt,m.dateFromString=rt,m.debounce=et,m.floorNumber=B,m.formatDate=ot,m.getStorage=J,m.getSystemInfo=X,m.inBrowser=Y,m.isPromiseLike=H,m.kebabCase=Q,m.makingCall=Z,m.padNumber=C,m.parseTimeData=at,m.partNumber=it,m.removeStorage=q,m.roundNumber=O,m.setClipboard=pt,m.setStorage=G,m.throttle=tt,m.useWxSdk=St,m.validatePhoneNumber=ct,Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
